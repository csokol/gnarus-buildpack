#!/usr/bin/env bash
# bin/compile <build-dir> <cache-dir>

set -e

# Parse args
export BUILD_DIR=$1
export CACHE_DIR=$2

BIN_DIR=$(cd $(dirname $0); pwd) # absolute path

mkdir -p $CACHE_DIR

. $BIN_DIR/../lib/utils

install_wget $CACHE_DIR
install_java $CACHE_DIR $BUILD_DIR
source $BIN_DIR/install_node $1 $2
source $BIN_DIR/install_ant $1 $2
echo -n "-----> Installing gnarus..."

echo $JAVA_HOME



$ANT_HOME/bin/ant -Duser.home=${BUILD_DIR} \
  -Dgnarus.environment=production -Dgnarus.product=alura \
  clear resolve create-war
